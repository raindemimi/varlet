import{d as _,a as D,b as T,w as z,o as G,_ as L,p as h,D as M,E as R,f as v,h as Y,M as S,N as p,O as b,P as B,Q as P,i as w,j as I,R as N,q as k,S as C,m as O,G as K,T as Z,r as E,V as H,W as Q,X as W,Y as X,Z as q,C as J}from"./vue-router.esm-bundler.42d3c0c2.js";import{p as m,L as x}from"./index.d61a6ab5.js";import{I as ee}from"./index.457a143c.js";import{u as ne}from"./zIndex.ca8ef2b3.js";import{p as y,c as F,f as te,m as oe}from"./components.0c747098.js";import{c as ae}from"./index.712020a1.js";import{u as ie}from"./lock.4badc63d.js";function se(e){return["top","center","bottom"].includes(e)}function re(e){return A.includes(e)}const U={type:{type:String,validator:re},position:{type:String,default:"top",validator:se},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:y(m,"type"),loadingSize:y(m,"size"),loadingRadius:y(m,"radius"),loadingColor:{...y(m,"color"),default:"currentColor"},lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}},{n:le,classes:ce}=F("snackbar"),de={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},ue=_({name:"VarSnackbarCore",components:{VarLoading:x,VarIcon:ee},props:U,setup(e){const n=D(null),{zIndex:t}=ne(()=>e.show,1);ie(()=>e.show,()=>e.lockScroll);const o=T(()=>e.type==="loading"||e.forbidClick),s=T(()=>e.type?de[e.type]:""),i=()=>{n.value=setTimeout(()=>{var a;e.type!=="loading"&&((a=e["onUpdate:show"])==null||a.call(e,!1))},e.duration)};return z(()=>e.show,a=>{var l,f;a?((l=e.onOpen)==null||l.call(e),i()):a===!1&&(clearTimeout(n.value),(f=e.onClose)==null||f.call(e))}),z(()=>e._update,()=>{clearTimeout(n.value),i()}),G(()=>{var a;e.show&&((a=e.onOpen)==null||a.call(e),i())}),{SNACKBAR_TYPE:A,n:le,classes:ce,zIndex:t,iconName:s,isForbidClick:o}}});function fe(e,n,t,o,s,i){const a=h("var-icon"),l=h("var-loading");return M((v(),Y("div",{class:p(e.n()),style:N({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[S("div",{class:p(e.classes(e.n("wrapper"),e.n(`wrapper-${e.position}`),"var-elevation--4",[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n(`wrapper-${e.type}`)])),style:N({zIndex:e.zIndex})},[S("div",{class:p([e.n("content"),e.contentClass])},[b(e.$slots,"default",{},()=>[B(P(e.content),1)])],2),S("div",{class:p(e.n("action"))},[e.iconName?(v(),w(a,{key:0,name:e.iconName},null,8,["name"])):I("v-if",!0),e.type==="loading"?(v(),w(l,{key:1,type:e.loadingType,size:e.loadingSize,color:e.loadingColor,radius:e.loadingRadius},null,8,["type","size","color","radius"])):I("v-if",!0),b(e.$slots,"action")],2)],6)],6)),[[R,e.show]])}const j=L(ue,[["render",fe]]);const{n:pe}=F("snackbar"),me=_({name:"VarSnackbar",components:{VarSnackbarCore:j},props:U,setup(){const{disabled:e}=te();return{n:pe,disabled:e}}});function ye(e,n,t,o,s,i){const a=h("var-snackbar-core");return v(),w(Z,{to:e.teleport,disabled:e.disabled},[k(K,{name:`${e.n()}-fade`,onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:C(()=>[k(a,O(e.$props,{class:e.n("transition")}),{action:C(()=>[b(e.$slots,"action")]),default:C(()=>[b(e.$slots,"default",{},()=>[B(P(e.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const c=L(me,[["render",ye]]);function ve(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!J(e)}const A=["loading","success","warning","info","error"];let V=0,$=!1,g,d=!1,r=E([]);const ge={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},be={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},ke={setup(){return()=>{const e=r.map(({id:t,reactiveSnackOptions:o,_update:s})=>{const i=document.querySelector(".var-transition-group");o.forbidClick||o.type==="loading"?i.classList.add("var-pointer-auto"):i.classList.remove("var-pointer-auto"),d&&(o.position="top");const l={position:d?"relative":"absolute",...Oe(o.position)};return k(j,O(o,{key:t,style:l,"data-id":t,_update:s,show:o.show,"onUpdate:show":f=>o.show=f}),null)}),n=ae.zIndex;return k(X,O(be,{style:{zIndex:n},onAfterEnter:Se,onAfterLeave:Ce}),ve(e)?e:{default:()=>[e]})}}},u=function(e){const n=Q(e)||W(e)?{content:String(e)}:e,t=E({...ge,...n});t.show=!0,$||($=!0,g=oe(ke).unmountInstance);const{length:o}=r,s={id:V++,reactiveSnackOptions:t};if(o===0||d)he(s);else{const i=`update-${V}`;we(t,i)}return{clear(){!d&&r.length?r[0].reactiveSnackOptions.show=!1:t.show=!1}}};A.forEach(e=>{u[e]=n=>(H(n)?n.type=e:n={content:n,type:e},u(n))});u.install=function(e){e.component(c.name,c)};u.allowMultiple=function(e=!1){e!==d&&(r.forEach(n=>{n.reactiveSnackOptions.show=!1}),d=e)};u.clear=function(){r.forEach(e=>{e.reactiveSnackOptions.show=!1})};u.Component=c;function Se(e){var o,s;const n=e.getAttribute("data-id"),t=r.find(i=>i.id===q(n));t&&((s=(o=t.reactiveSnackOptions).onOpened)==null||s.call(o))}function Ce(e){var s,i;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),t=r.find(a=>a.id===q(n));t&&(t.animationEnd=!0,(i=(s=t.reactiveSnackOptions).onClosed)==null||i.call(s)),r.every(a=>a.animationEnd)&&(g==null||g(),r=E([]),$=!1)}function he(e){r.push(e)}function we(e,n){const[t]=r;t.reactiveSnackOptions={...t.reactiveSnackOptions,...e},t._update=n}function Oe(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}c.install=function(e){e.component(c.name,c)};export{u as S};
